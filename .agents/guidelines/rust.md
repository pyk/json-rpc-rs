# Rust Coding Guidelines: Documentation

> [!IMPORTANT]
>
> Follow these guidelines strictly

## 1. Doc Comments as API References

Doc comments must explain **what** and **why** (intent), not **how**
(implementation). Every public item needs a doc comment. Every module file needs
top-level `//!` documentation.

## 2. Write Simple, Clear Language

Use plain English. Avoid jargon and complex words. Focus on clarity.

Words to avoid:

- "constitutes" â†’ use "is", "represents", or "defines"
- "utilize" â†’ use "use"
- "facilitate" â†’ use "enable" or "help"
- "in order to" â†’ use "to"
- "subsequently" â†’ use "later" or "then"
- "comprise" â†’ use "include" or "contain"
- "leverage" â†’ use "use"

## 3. Include Module Documentation

Every module file must start with top-level `//!` documentation:

```rust
//! Cargo documentation generation utilities.
//!
//! This module provides functions for generating documentation from
//! Cargo packages, including parsing rustdoc JSON output and converting
//! it to markdown format.
```

## 4. Avoid Bullets and Unnecessary Headers

Avoid "Arguments", "Returns", "Architecture" headers. Write as paragraphs. Use
lists sparingly. No bold labels like "**Important:**" or "**Note:**".

ðŸ›‘ Bad (Headers & Bullets):

```rust
/// A handler for network requests.
///
/// This trait defines the interface for processing requests.
///
/// - **Transport-agnostic**: Works with any handler
/// - **Protocol-agnostic**: Don't understand structure
/// - **Bidirectional**: Same handler for read/write
```

âœ… Good (Paragraph Style):

```rust
/// A handler for network requests.
///
/// This trait defines the interface for processing requests and generating
/// responses. The design is transport-agnostic, allowing both producers and
/// consumers to work with any handler implementation. Handlers are
/// bidirectional and can be used for both read and write roles.
```

ðŸ›‘ Bad (Arguments Header):

```rust
/// Send a data packet.
///
/// This is a low-level I/O operation.
///
/// # Arguments
///
/// * `packet` - The data packet to send
```

âœ… Good (Integrated Description):

```rust
/// Send a data packet.
///
/// This is a low-level I/O operation. The packet should be properly formatted,
/// but the handler doesn't validate this.
```

## 5. Use Lists When Appropriate

Simple lists are OK for clarity, especially for error codes or options.

âœ… Good (Error Codes):

```rust
/// A protocol error.
///
/// Standard error codes:
/// - 1001: Parse error
/// - 1002: Invalid request
/// - 1003: Operation not found
/// - 2000 to 2999: Application error
```

## 6. Document Behavior and Errors

Focus on what the function does and when it fails.

âœ… Good (Function with Errors):

```rust
/// Parses rustdoc JSON output and extracts item documentation.
///
/// This function reads rustdoc JSON generated by `cargo rustdoc -- --output-format json`
/// and extracts documentation items including functions, structs, and enums.
/// The output is organized by crate and item type for easy navigation.
pub fn parse_rustdoc(path: &Path) -> Result<Documentation> {
    // ...
}
```

## 7. Include Examples for Complex APIs

Use `# Example` header for non-obvious APIs.

âœ… Good:

````rust
/// Builds a documentation index from parsed items.
///
/// The index groups items by type and provides quick access to
/// frequently used documentation.
///
/// # Example
///
/// ```
/// use doc_generator::Documentation;
///
/// let docs = Documentation::new();
/// let index = docs.build_index();
///
/// assert_eq!(index.functions.len(), 42);
/// ```
pub fn build_index(&self) -> Index {
    // ...
}
````

## 8. Use Intra-Doc Links

Reference other items using [`ItemName`] syntax.

âœ… Good:

```rust
/// Processes documentation items and generates markdown output.
///
/// See [`Documentation`] for the input structure and [`MarkdownWriter`]
/// for the output format.
///
/// This function is called by [`generate_docs`] after parsing is complete.
pub fn process_items(docs: &Documentation) -> String {
    // ...
}
```
